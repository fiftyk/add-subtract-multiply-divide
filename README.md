# add-subtract-multiply-divide

åŸºäº LLM çš„å‡½æ•°ç¼–æ’ç³»ç»Ÿ - é€šè¿‡è‡ªç„¶è¯­è¨€æè¿°éœ€æ±‚ï¼Œè‡ªåŠ¨è§„åˆ’å’Œæ‰§è¡Œå‡½æ•°è°ƒç”¨é“¾è·¯ã€‚

## ç‰¹æ€§

- ğŸ¤– **æ™ºèƒ½è§„åˆ’**: ä½¿ç”¨ Claude API å°†è‡ªç„¶è¯­è¨€éœ€æ±‚è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„å‡½æ•°è°ƒç”¨é“¾
- ğŸ”— **é“¾å¼æ‰§è¡Œ**: æ”¯æŒå¤šæ­¥éª¤é¡ºåºæ‰§è¡Œï¼Œæ­¥éª¤é—´æ•°æ®è‡ªåŠ¨ä¼ é€’
- ğŸ”„ **äº¤äº’å¼æ”¹è¿›**: æ”¯æŒå¤šè½®å¯¹è¯å¼æ”¹è¿›æ‰§è¡Œè®¡åˆ’ï¼Œè‡ªç„¶è¯­è¨€æè¿°ä¿®æ”¹éœ€æ±‚
- ğŸ® **äº¤äº’æ¨¡å¼**: plan å‘½ä»¤æ”¯æŒäº¤äº’æ¨¡å¼ï¼Œä¸€ç«™å¼å®Œæˆè®¡åˆ’ã€æ”¹è¿›ã€æ‰§è¡Œ
- ğŸ” **ç¼ºå£è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ç¼ºå¤±çš„å‡½æ•°å¹¶ç”Ÿæˆå»ºè®®çš„å‡½æ•°å®šä¹‰
- âš¡ **è‡ªåŠ¨ Mock ç”Ÿæˆ**: å½“ç¼ºå°‘å‡½æ•°æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯æ‰§è¡Œçš„ mock å®ç°ï¼Œè®©æµç¨‹ç«‹å³è·‘é€š
- ğŸ“ **ç‰ˆæœ¬ç®¡ç†**: è®¡åˆ’æ”¹è¿›æ”¯æŒç‰ˆæœ¬è¿½è¸ªï¼ˆv1, v2, v3...ï¼‰
- ğŸ” **æ‰§è¡Œä¼šè¯ç®¡ç†**: æ¯æ¬¡æ‰§è¡Œåˆ›å»ºç‹¬ç«‹ä¼šè¯ï¼Œæ”¯æŒé‡è¯•ã€å†å²æŸ¥è¯¢ã€ç»Ÿè®¡åˆ†æ
- ğŸ’¾ **ä¼šè¯æŒä¹…åŒ–**: æ‰§è¡Œå†å²å’Œå¯¹è¯å†å²è‡ªåŠ¨ä¿å­˜ï¼Œæ”¯æŒç»§ç»­ä¹‹å‰çš„ä¼šè¯
- âœ… **TDD å¼€å‘**: 178 ä¸ªå•å…ƒæµ‹è¯•ç¡®ä¿ä»£ç è´¨é‡
- ğŸ“¦ **æŒä¹…åŒ–å­˜å‚¨**: è®¡åˆ’å’Œæ‰§è¡Œä¼šè¯æœ¬åœ°ä¿å­˜
- ğŸ¯ **ç±»å‹å®‰å…¨**: TypeScript ç¼–å†™ï¼Œå®Œæ•´çš„ç±»å‹æ”¯æŒ
- ğŸ—ï¸ **SOLID è®¾è®¡**: éµå¾ª SOLID åŸåˆ™ï¼Œæ˜“æ‰©å±•æ˜“ç»´æŠ¤

## ğŸ“š æ–‡æ¡£

- **[å¿«é€Ÿå¼€å§‹](./docs/quickstart.md)** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- **[é…ç½®æŒ‡å—](./docs/configuration.md)** - å®Œæ•´çš„é…ç½®é€‰é¡¹è¯´æ˜
- **[Mock ç”Ÿæˆè®¾è®¡](./docs/mock-generation-design.md)** - Mock ç³»ç»Ÿæ¶æ„è®¾è®¡
- **[CHANGELOG](./CHANGELOG.md)** - ç‰ˆæœ¬å†å²å’Œå˜æ›´è®°å½•

## å®‰è£…

```bash
npm install
npm run build
```

## å¿«é€Ÿé…ç½®

### 1. è®¾ç½® API Keyï¼ˆå¿…éœ€ï¼‰

```bash
# æ–¹å¼ 1: ä½¿ç”¨ ANTHROPIC_API_KEY
export ANTHROPIC_API_KEY="your-api-key-here"

# æ–¹å¼ 2: ä½¿ç”¨ ANTHROPIC_AUTH_TOKENï¼ˆClaude Code å…¼å®¹ï¼‰
export ANTHROPIC_AUTH_TOKEN="your-api-key-here"
```

> ğŸ’¡ å¦‚æœä½ å·²ç»åœ¨ä½¿ç”¨ Claude Codeï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç°æœ‰çš„ `ANTHROPIC_AUTH_TOKEN` ç¯å¢ƒå˜é‡ã€‚

### 2. åˆ›å»º .env æ–‡ä»¶ï¼ˆæ¨èï¼‰

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
nano .env
```

### 3. æ›´å¤šé…ç½®é€‰é¡¹

å®Œæ•´çš„é…ç½®è¯´æ˜è¯·å‚è€ƒï¼š**[é…ç½®æŒ‡å—](./docs/configuration.md)**

åŒ…æ‹¬ï¼š
- API ç«¯ç‚¹è‡ªå®šä¹‰
- Mock è‡ªåŠ¨ç”Ÿæˆæ§åˆ¶
- æ‰§è¡Œè¶…æ—¶è®¾ç½®
- æ—¥å¿—çº§åˆ«é…ç½®
- é…ç½®ä¼˜å…ˆçº§è¯´æ˜

## ä½¿ç”¨

> ğŸ’¡ **æç¤º**: æ‰€æœ‰å‘½ä»¤é»˜è®¤ä½¿ç”¨ `./dist/functions/index.js` ä½œä¸ºå‡½æ•°æ–‡ä»¶ã€‚å¦‚æœä½ çš„å‡½æ•°åœ¨å…¶ä»–ä½ç½®ï¼Œä½¿ç”¨ `-f` å‚æ•°æŒ‡å®šè·¯å¾„ã€‚

### æŸ¥çœ‹ç‰ˆæœ¬å·

```bash
npx fn-orchestrator --version
# æˆ–ä½¿ç”¨çŸ­é€‰é¡¹
npx fn-orchestrator -v
```

### 1. æŸ¥çœ‹å·²æ³¨å†Œçš„å‡½æ•°

```bash
npx fn-orchestrator list functions
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“š å·²æ³¨å†Œçš„å‡½æ•° (4 ä¸ª):
  - å†…ç½®å‡½æ•°: 4 ä¸ª

â•â•â• å†…ç½®å‡½æ•° â•â•â•

- add: å°†ä¸¤ä¸ªæ•°å­—ç›¸åŠ 
  ä½¿ç”¨åœºæ™¯: å½“éœ€è¦è®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œæ—¶ä½¿ç”¨
  å‚æ•°:
    - a (number): ç¬¬ä¸€ä¸ªåŠ æ•°
    - b (number): ç¬¬äºŒä¸ªåŠ æ•°
  è¿”å›å€¼: number - ä¸¤æ•°ä¹‹å’Œ

- subtract: å°†ä¸¤ä¸ªæ•°å­—ç›¸å‡
- multiply: å°†ä¸¤ä¸ªæ•°å­—ç›¸ä¹˜
- divide: å°†ä¸¤ä¸ªæ•°å­—ç›¸é™¤
```

å¦‚æœæœ‰ Mock å‡½æ•°ï¼Œè¾“å‡ºä¼šæ˜¾ç¤ºï¼š
```
ğŸ“š å·²æ³¨å†Œçš„å‡½æ•° (6 ä¸ª):
  - å†…ç½®å‡½æ•°: 4 ä¸ª
  - Mock å‡½æ•°: 2 ä¸ª (.data/plans/)

â•â•â• å†…ç½®å‡½æ•° â•â•â•
[å†…ç½®å‡½æ•°åˆ—è¡¨...]

â•â•â• Mock å‡½æ•° â•â•â•

- sqrt: è®¡ç®—å¹³æ–¹æ ¹
  å‚æ•°:
    - x (number): è¢«å¼€æ–¹æ•°
  è¿”å›å€¼: number - å¹³æ–¹æ ¹

ğŸ’¡ æç¤º: Mock å‡½æ•°ä½äº .data/plans/{planId}/mocks/ ç›®å½•
   æ¯ä¸ª plan çš„ mock å‡½æ•°ç‹¬ç«‹å­˜å‚¨ï¼Œæ”¯æŒç‰ˆæœ¬è¿­ä»£
   ä½ å¯ä»¥ç¼–è¾‘è¿™äº›æ–‡ä»¶æ¥å®ç°çœŸå®é€»è¾‘
```

### 2. ç”Ÿæˆæ‰§è¡Œè®¡åˆ’

```bash
npx fn-orchestrator plan "è®¡ç®— (3 + 5) * 2"
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“ æ­£åœ¨åˆ†æéœ€æ±‚...
ç”¨æˆ·éœ€æ±‚: è®¡ç®— (3 + 5) * 2

å·²åŠ è½½ 4 ä¸ªå‡½æ•°: add, subtract, multiply, divide

âœ… è®¡åˆ’ç”ŸæˆæˆåŠŸï¼

ğŸ“‹ æ‰§è¡Œè®¡åˆ’ #plan-abc123:
ç”¨æˆ·éœ€æ±‚: è®¡ç®— (3 + 5) * 2
çŠ¶æ€: âœ… å¯æ‰§è¡Œ

æ­¥éª¤:
  Step 1: add(a=3, b=5)
    â†’ å…ˆè®¡ç®— 3 + 5
  Step 2: multiply(a=${step.1.result}, b=2)
    â†’ å°†ç»“æœä¹˜ä»¥ 2

æ‰§è¡Œå‘½ä»¤: npx fn-orchestrator execute plan-abc123
```

### 3. æ‰§è¡Œè®¡åˆ’

```bash
npx fn-orchestrator execute plan-abc123
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“‹ æ‰§è¡Œè®¡åˆ’:
...

ç¡®è®¤æ‰§è¡Œæ­¤è®¡åˆ’? (y/n): y

ğŸš€ å¼€å§‹æ‰§è¡Œ...
Session ID: session-a1b2c3d4

æ‰§è¡Œç»“æœ - è®¡åˆ’ #plan-abc123

âœ… Step 1: add(a=3, b=5)
   â†’ ç»“æœ: 8
âœ… Step 2: multiply(a=8, b=2)
   â†’ ç»“æœ: 16

ğŸ“¦ æœ€ç»ˆç»“æœ: 16
âœ… æ‰§è¡ŒæˆåŠŸ!

ğŸ’¡ æç¤º: ä½¿ç”¨ "npx fn-orchestrator sessions retry session-a1b2c3d4" é‡è¯•
```

> ğŸ“ **ExecutionSession æœºåˆ¶**: æ¯æ¬¡æ‰§è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä¼šè¯ï¼ˆSessionï¼‰ï¼Œè®°å½•å®Œæ•´çš„æ‰§è¡ŒçŠ¶æ€å’Œç»“æœã€‚ä¼šè¯æ•°æ®æŒä¹…åŒ–åˆ° `.data/execution-sessions/` ç›®å½•ï¼Œæ”¯æŒé‡è¯•ã€æŸ¥è¯¢å†å²ç­‰æ“ä½œã€‚

### 4. ğŸ†• ç®¡ç†æ‰§è¡Œä¼šè¯ï¼ˆsessions å‘½ä»¤ï¼‰

ç³»ç»Ÿä¼šä¸ºæ¯æ¬¡ plan æ‰§è¡Œåˆ›å»ºç‹¬ç«‹çš„ä¼šè¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹å†å²ã€é‡è¯•å¤±è´¥çš„æ‰§è¡Œã€æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯ç­‰ã€‚

#### 4.1 æŸ¥çœ‹æ‰€æœ‰ä¼šè¯

```bash
# æŸ¥çœ‹æ‰€æœ‰æ‰§è¡Œä¼šè¯
npx fn-orchestrator sessions list

# æŒ‰ plan è¿‡æ»¤
npx fn-orchestrator sessions list --plan plan-abc123

# æŒ‰çŠ¶æ€è¿‡æ»¤
npx fn-orchestrator sessions list --status failed
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“‹ æ‰§è¡Œä¼šè¯åˆ—è¡¨

â”â”â”â”â”â”â”â”â”â”â” plan-abc123 â”â”â”â”â”â”â”â”â”â”â”

session-a1b2c3d4 [completed]
  è®¡åˆ’: plan-abc123-v1
  å¹³å°: cli
  åˆ›å»ºæ—¶é—´: 2024-01-15 10:30:00
  å®Œæˆæ—¶é—´: 2024-01-15 10:30:05
  âœ… æ‰§è¡ŒæˆåŠŸ

session-x9y8z7w6 [failed]
  è®¡åˆ’: plan-abc123-v2
  å¹³å°: cli
  åˆ›å»ºæ—¶é—´: 2024-01-15 11:00:00
  å®Œæˆæ—¶é—´: 2024-01-15 11:00:03
  âŒ æ‰§è¡Œå¤±è´¥: Division by zero

â”â”â”â”â”â”â”â”â”â”â” plan-def456 â”â”â”â”â”â”â”â”â”â”â”

session-p5q4r3s2 [completed]
  è®¡åˆ’: plan-def456
  å¹³å°: web
  åˆ›å»ºæ—¶é—´: 2024-01-15 12:00:00
  å®Œæˆæ—¶é—´: 2024-01-15 12:00:08
  âœ… æ‰§è¡ŒæˆåŠŸ
```

#### 4.2 æŸ¥çœ‹ä¼šè¯è¯¦æƒ…

```bash
npx fn-orchestrator sessions show session-a1b2c3d4
```

è¾“å‡ºåŒ…æ‹¬ï¼š
- ä¼šè¯å…ƒæ•°æ®ï¼ˆçŠ¶æ€ã€æ—¶é—´ã€é‡è¯•æ¬¡æ•°ç­‰ï¼‰
- å…³è”çš„æ‰§è¡Œè®¡åˆ’
- æ¯ä¸ªæ­¥éª¤çš„æ‰§è¡Œç»“æœ
- æœ€ç»ˆç»“æœæˆ–é”™è¯¯ä¿¡æ¯

#### 4.3 é‡è¯•å¤±è´¥çš„ä¼šè¯

```bash
# ä»å¤´é‡è¯•
npx fn-orchestrator sessions retry session-x9y8z7w6

# ä»æŒ‡å®šæ­¥éª¤å¼€å§‹é‡è¯•
npx fn-orchestrator sessions retry session-x9y8z7w6 --from-step 2
```

é‡è¯•ä¼šåˆ›å»ºæ–°çš„ä¼šè¯ï¼Œå¹¶ç»§æ‰¿å‰ä¸€ä¸ªä¼šè¯çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚

#### 4.4 æŸ¥çœ‹æ‰§è¡Œç»Ÿè®¡

```bash
npx fn-orchestrator sessions stats plan-abc123
```

è¾“å‡ºç¤ºä¾‹ï¼š
```
ğŸ“Š æ‰§è¡Œç»Ÿè®¡ - plan-abc123

æ€»æ‰§è¡Œæ¬¡æ•°: 15
æˆåŠŸæ¬¡æ•°: 13
å¤±è´¥æ¬¡æ•°: 2
æˆåŠŸç‡: 86.7%
å¹³å‡æ‰§è¡Œæ—¶é•¿: 2.4 ç§’
```

#### 4.5 åˆ é™¤ä¼šè¯

```bash
npx fn-orchestrator sessions delete session-a1b2c3d4
```

### 5. ğŸ†• äº¤äº’å¼æ”¹è¿›è®¡åˆ’ï¼ˆrefine å‘½ä»¤ï¼‰

ä½¿ç”¨è‡ªç„¶è¯­è¨€å¤šè½®æ”¹è¿›å·²ç”Ÿæˆçš„è®¡åˆ’ï¼š

```bash
npx fn-orchestrator refine plan-abc123
```

äº¤äº’ç¤ºä¾‹ï¼š
```
ğŸ“‹ å½“å‰è®¡åˆ’ï¼šplan-abc123-v1
ç”¨æˆ·éœ€æ±‚: è®¡ç®— (3 + 5) * 2
æ­¥éª¤:
  Step 1: add(a=3, b=5)
  Step 2: multiply(a=${step.1.result}, b=2)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

? è¯·æè¿°ä½ æƒ³åšçš„ä¿®æ”¹ï¼ˆè¾“å…¥ "done" å®Œæˆï¼Œ"quit" é€€å‡ºï¼‰ï¼š
> æŠŠç¬¬2æ­¥æ”¹æˆé™¤ä»¥2

ğŸ¤– æ­£åœ¨å¤„ç†ä¿®æ”¹...
âœ… Plan å·²æ›´æ–°ï¼šplan-abc123-v2

ğŸ“‹ æ”¹åŠ¨è¯´æ˜ï¼š
  â€¢ å°†ç¬¬ 2 æ­¥çš„å‡½æ•°ä» multiply æ”¹ä¸º divide

ğŸ“‹ æ›´æ–°åçš„è®¡åˆ’ï¼š
æ­¥éª¤:
  Step 1: add(a=3, b=5)
  Step 2: divide(a=${step.1.result}, b=2)

? è¯·æè¿°ä½ æƒ³åšçš„ä¿®æ”¹ï¼ˆè¾“å…¥ "done" å®Œæˆï¼Œ"quit" é€€å‡ºï¼‰ï¼š
> done

âœ… æ”¹è¿›å®Œæˆï¼æœ€ç»ˆè®¡åˆ’ï¼šplan-abc123-v2
ğŸ’¾ æ‰§è¡Œå‘½ä»¤: npx fn-orchestrator execute plan-abc123-v2
```

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
- ğŸ“ æ”¯æŒå¤šè½®æ”¹è¿›ï¼Œæ¯æ¬¡æ”¹è¿›ç”Ÿæˆæ–°ç‰ˆæœ¬ï¼ˆv1 â†’ v2 â†’ v3...ï¼‰
- ğŸ’¾ ä¼šè¯å†å²è‡ªåŠ¨ä¿å­˜ï¼Œå¯ç»§ç»­ä¹‹å‰çš„å¯¹è¯ï¼ˆä½¿ç”¨ `-s` å‚æ•°ï¼‰
- ğŸ” ç‰ˆæœ¬å¯è¿½æº¯ï¼Œå¯æŸ¥çœ‹æ‰€æœ‰å†å²ç‰ˆæœ¬

**å¿«æ·æ–¹å¼ - å•æ¬¡æ”¹è¿›**ï¼š
```bash
npx fn-orchestrator refine plan-abc123 -p "æŠŠç¬¬2æ­¥æ”¹æˆé™¤ä»¥2"
```

### 6. ğŸ® äº¤äº’æ¨¡å¼ï¼ˆplan -iï¼‰

ä¸€ç«™å¼å®Œæˆè®¡åˆ’åˆ›å»ºã€æ”¹è¿›ã€æ‰§è¡Œï¼š

```bash
npx fn-orchestrator plan "è®¡ç®— (3 + 5) * 2" -i
```

äº¤äº’æµç¨‹ç¤ºä¾‹ï¼š
```
ğŸ“ æ­£åœ¨åˆ†æéœ€æ±‚...
âœ… è®¡åˆ’å·²ç”Ÿæˆï¼šplan-abc123-v1

ğŸ“‹ æ‰§è¡Œè®¡åˆ’ #plan-abc123-v1
æ­¥éª¤:
  Step 1: add(a=3, b=5)
  Step 2: multiply(a=${step.1.result}, b=2)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

? è¯·è¾“å…¥æ“ä½œï¼ˆè¾“å…¥æ”¹è¿›æŒ‡ä»¤ï¼Œæˆ– "execute" æ‰§è¡Œï¼Œ"quit" é€€å‡ºï¼‰ï¼š
> æŠŠç¬¬2æ­¥æ”¹æˆé™¤ä»¥2

ğŸ¤– æ­£åœ¨å¤„ç†ä¿®æ”¹...
âœ… Plan å·²æ›´æ–°ï¼šplan-abc123-v2
ğŸ“‹ æ”¹åŠ¨è¯´æ˜ï¼š
  â€¢ å°†ç¬¬ 2 æ­¥çš„å‡½æ•°ä» multiply æ”¹ä¸º divide

? è¯·è¾“å…¥æ“ä½œï¼ˆè¾“å…¥æ”¹è¿›æŒ‡ä»¤ï¼Œæˆ– "execute" æ‰§è¡Œï¼Œ"quit" é€€å‡ºï¼‰ï¼š
> execute

ğŸš€ å¼€å§‹æ‰§è¡Œè®¡åˆ’...
âœ… æ‰§è¡ŒæˆåŠŸï¼æœ€ç»ˆç»“æœ: 4
```

**å¯ç”¨å‘½ä»¤**ï¼š
- ç›´æ¥è¾“å…¥æ–‡æœ¬ â†’ ä½œä¸ºæ”¹è¿›æŒ‡ä»¤
- `execute` æˆ– `e` â†’ æ‰§è¡Œå½“å‰è®¡åˆ’
- `show` æˆ– `s` â†’ æ˜¾ç¤ºå½“å‰è®¡åˆ’
- `quit` æˆ– `q` â†’ é€€å‡ºç¨‹åº

**ä½¿ç”¨åœºæ™¯**ï¼š
- ğŸ¯ å¿«é€Ÿè¯•é”™ï¼šåˆ›å»º â†’ æ”¹è¿› â†’ æ‰§è¡Œä¸€æ°”å‘µæˆ
- ğŸ”„ è¿­ä»£ä¼˜åŒ–ï¼šå‘ç°é—®é¢˜ç«‹å³æ”¹è¿›ï¼Œæ— éœ€åˆ‡æ¢å‘½ä»¤
- ğŸ’¡ æ¢ç´¢å¼å¼€å‘ï¼šè¾¹æ”¹è¾¹è¯•ï¼Œå¿«é€ŸéªŒè¯æƒ³æ³•

### 7. æŸ¥çœ‹æ‰€æœ‰è®¡åˆ’

```bash
npx fn-orchestrator list plans
```

### 8. æŸ¥çœ‹è®¡åˆ’è¯¦æƒ…

```bash
npx fn-orchestrator show-plan plan-abc123
```

## è‡ªå®šä¹‰å‡½æ•°

åœ¨ `functions/` ç›®å½•ä¸‹å®šä¹‰ä½ è‡ªå·±çš„å‡½æ•°ï¼š

```typescript
import { defineFunction } from '../src/registry/index.js';

export const myFunction = defineFunction({
  name: 'myFunction',
  description: 'å‡½æ•°åŠŸèƒ½æè¿°',
  scenario: 'ä½¿ç”¨åœºæ™¯è¯´æ˜',
  parameters: [
    { name: 'x', type: 'number', description: 'å‚æ•°è¯´æ˜' }
  ],
  returns: { type: 'number', description: 'è¿”å›å€¼è¯´æ˜' },
  implementation: (x: number) => {
    // ä½ çš„å®ç°
    return x * 2;
  }
});
```

## æµ‹è¯•éªŒè¯

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
npm test
```

æµ‹è¯•è¦†ç›–ï¼š
- âœ… 13 ä¸ª Registry æµ‹è¯•
- âœ… 6 ä¸ª Planner æµ‹è¯•
- âœ… 15 ä¸ª Executor æµ‹è¯•
- âœ… 27 ä¸ª Storage æµ‹è¯•ï¼ˆå«ç‰ˆæœ¬ç®¡ç†ï¼‰
- âœ… 33 ä¸ª Mock ç”Ÿæˆæµ‹è¯•
- âœ… 38 ä¸ª Config ç®¡ç†æµ‹è¯•
- âœ… 14 ä¸ª Logger æµ‹è¯•
- âœ… 12 ä¸ª InteractivePlanService æµ‹è¯•
- âœ… 7 ä¸ª MockServiceFactoryImpl æµ‹è¯•
- âœ… 21 ä¸ª ExecutionSessionStorage æµ‹è¯•ï¼ˆæ–°å¢ï¼‰
- âœ… 22 ä¸ª ExecutionSessionManager æµ‹è¯•ï¼ˆæ–°å¢ï¼‰
- âœ… 8 ä¸ªç«¯åˆ°ç«¯æµ‹è¯•

**æ€»è®¡: 216 ä¸ªæµ‹è¯•ï¼Œ98.3% é€šè¿‡ç‡**

### ç«¯åˆ°ç«¯æµ‹è¯•ç”¨ä¾‹

æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‡å·²é€šè¿‡ï¼š

1. âœ… è®¡ç®— 3 + 5 = 8
2. âœ… è®¡ç®— 10 - 3 = 7
3. âœ… è®¡ç®— 4 * 6 = 24
4. âœ… è®¡ç®— 20 / 4 = 5
5. âœ… è®¡ç®— (3 + 5) * 2 = 16 (å¤šæ­¥éª¤)
6. âœ… è®¡ç®— ((10 - 3) * 4) / 2 = 14 (é“¾å¼è°ƒç”¨)
7. âœ… é™¤æ•°ä¸º 0 é”™è¯¯å¤„ç†
8. âœ… ç¼ºå¤±å‡½æ•°è¯†åˆ«

## ç¼ºå£è¯†åˆ«ç¤ºä¾‹

å½“å°è¯•ä½¿ç”¨ä¸å­˜åœ¨çš„å‡½æ•°æ—¶ï¼š

```bash
npx fn-orchestrator plan "è®¡ç®— 9 çš„å¹³æ–¹æ ¹"
```

ç³»ç»Ÿä¼šæç¤ºï¼š
```
âš ï¸ æ— æ³•å®Œæˆæ­¤éœ€æ±‚ï¼Œç¼ºå°‘ä»¥ä¸‹å‡½æ•°:

1. sqrt
   - æè¿°: è®¡ç®—å¹³æ–¹æ ¹
   - å‚æ•°: x (number)
   - è¿”å›: number
```

## ğŸ†• è‡ªåŠ¨ Mock ç”ŸæˆåŠŸèƒ½

å½“ç³»ç»Ÿè¯†åˆ«åˆ°ç¼ºå¤±å‡½æ•°æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨ä½¿ç”¨ LLM ç”Ÿæˆå¯æ‰§è¡Œçš„ mock å®ç°ï¼Œè®©ä½ çš„æµç¨‹ç«‹å³è·‘é€šã€‚

### å¿«é€Ÿå¯ç”¨

```bash
# ä½¿ç”¨ --auto-mock æ ‡å¿—å¯ç”¨
npx fn-orchestrator plan "è®¡ç®— 16 çš„å¹³æ–¹æ ¹" --auto-mock
```

ç³»ç»Ÿä¼šï¼š
1. ğŸ” è¯†åˆ«ç¼ºå¤±çš„å‡½æ•°ï¼ˆå¦‚ `sqrt`ï¼‰
2. ğŸ¤– è‡ªåŠ¨ç”Ÿæˆ mock å®ç°
3. ğŸ’¾ ä¿å­˜åˆ° `.data/plans/{planId}/mocks/` ç›®å½•ï¼ˆç‰ˆæœ¬åŒ–å­˜å‚¨ï¼‰
4. âœ… ç”Ÿæˆå¯æ‰§è¡Œçš„è®¡åˆ’

ç”Ÿæˆçš„ mock æ–‡ä»¶ï¼š
- å­˜å‚¨åœ¨ Plan ä¸“å±ç›®å½•ï¼Œè·Ÿéš Plan ç”Ÿå‘½å‘¨æœŸ
- æ”¯æŒç‰ˆæœ¬è¿­ä»£ï¼ˆv1 â†’ v2 â†’ v3...ï¼‰
- å¯ä¾›åç»­å®Œå–„ï¼ˆ"æ‚¬èµæ¨¡å¼"ï¼‰

### äº†è§£æ›´å¤š

- **ä½¿ç”¨æŒ‡å—**: å‚è€ƒ [å¿«é€Ÿå¼€å§‹](./docs/quickstart.md) ä¸­çš„ Mock ç”Ÿæˆç¤ºä¾‹
- **é…ç½®è¯´æ˜**: å‚è€ƒ [é…ç½®æŒ‡å—](./docs/configuration.md) äº†è§£å¦‚ä½•å¯ç”¨å’Œé…ç½®
- **æŠ€æœ¯è®¾è®¡**: å‚è€ƒ [Mock ç”Ÿæˆè®¾è®¡](./docs/mock-generation-design.md) äº†è§£æ¶æ„å®ç°

## é¡¹ç›®ç»“æ„

```
add-subtract-multiply-divide/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ registry/          # å‡½æ•°æ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ planner/           # LLM è§„åˆ’å™¨
â”‚   â”œâ”€â”€ executor/          # æ‰§è¡Œå¼•æ“
â”‚   â”‚   â””â”€â”€ session/       # æ‰§è¡Œä¼šè¯ç®¡ç†
â”‚   â”‚       â”œâ”€â”€ interfaces/    # ExecutionSessionStorage, ExecutionSessionManager
â”‚   â”‚       â”œâ”€â”€ storage/       # å­˜å‚¨å®ç°
â”‚   â”‚       â””â”€â”€ managers/      # ä¼šè¯ç®¡ç†å™¨
â”‚   â”œâ”€â”€ storage/           # æŒä¹…åŒ–å­˜å‚¨
â”‚   â”œâ”€â”€ services/          # è®¡åˆ’æ”¹è¿›æœåŠ¡
â”‚   â”‚   â””â”€â”€ storage/       # PlanRefinementSessionStorage
â”‚   â”œâ”€â”€ mock/              # Mock ç”Ÿæˆæ¨¡å—
â”‚   â”‚   â”œâ”€â”€ interfaces/    # æ¥å£å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ implementations/ # å…·ä½“å®ç°
â”‚   â”‚   â”œâ”€â”€ adapters/      # LLM é€‚é…å™¨
â”‚   â”‚   â”œâ”€â”€ decorators/    # Planner è£…é¥°å™¨
â”‚   â”‚   â””â”€â”€ factory/       # æœåŠ¡å·¥å‚
â”‚   â””â”€â”€ cli/               # CLI å‘½ä»¤
â”œâ”€â”€ functions/             # å‡½æ•°å®šä¹‰
â”‚   â”œâ”€â”€ math.ts            # æ•°å­¦å‡½æ•°ï¼ˆåŠ å‡ä¹˜é™¤ï¼‰
â”‚   â””â”€â”€ generated/         # é—ç•™ï¼šå…¼å®¹æ—§ç‰ˆæœ¬ Mock
â”œâ”€â”€ __tests__/             # ç«¯åˆ°ç«¯æµ‹è¯•
â”œâ”€â”€ .data/                 # æœ¬åœ°æ•°æ®å­˜å‚¨
â”‚   â”œâ”€â”€ plans/             # æ‰§è¡Œè®¡åˆ’ + Mock å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ plan-abc123/   # Plan ä¸“å±ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ v1.json    # Plan ç‰ˆæœ¬ 1
â”‚   â”‚   â”‚   â”œâ”€â”€ v2.json    # Plan ç‰ˆæœ¬ 2
â”‚   â”‚   â”‚   â””â”€â”€ mocks/     # Plan ä¸“å± Mock ç›®å½•
â”‚   â”‚   â”‚       â”œâ”€â”€ power-v1.js
â”‚   â”‚   â”‚       â””â”€â”€ power-v2.js
â”‚   â”‚   â””â”€â”€ plan-def456/
â”‚   â”œâ”€â”€ execution-sessions/     # æ‰§è¡Œä¼šè¯è®°å½•
â”‚   â”‚   â”œâ”€â”€ session-a1b2c3d4.json
â”‚   â”‚   â””â”€â”€ session-x9y8z7w6.json
â”‚   â””â”€â”€ refinement-sessions/    # Plan æ”¹è¿›ä¼šè¯ï¼ˆrefine å‘½ä»¤ï¼‰
â”‚       â””â”€â”€ session-xyz123.json
â””â”€â”€ package.json
```

## æ¶æ„è®¾è®¡

### æ ¸å¿ƒæµç¨‹

```
ç”¨æˆ·éœ€æ±‚ (è‡ªç„¶è¯­è¨€)
    â†“
Planner (Claude API)
    â†“
æ‰§è¡Œè®¡åˆ’ (JSON)
    â†“
ç”¨æˆ·ç¡®è®¤
    â†“
Executor
    â†“
æ‰§è¡Œç»“æœ
```

### å…³é”®æ¨¡å—

1. **Function Registry**: ç®¡ç†å‡½æ•°çš„æ³¨å†Œã€æŸ¥è¯¢å’Œæ‰§è¡Œ
2. **Planner**: è°ƒç”¨ Claude APIï¼Œå°†è‡ªç„¶è¯­è¨€è½¬ä¸ºç»“æ„åŒ–è®¡åˆ’
3. **Executor**: æŒ‰è®¡åˆ’é¡ºåºæ‰§è¡Œï¼Œå¤„ç†æ­¥éª¤é—´æ•°æ®ä¼ é€’
4. **Storage**: æŒä¹…åŒ–è®¡åˆ’å’Œæ‰§è¡Œè®°å½•åˆ°æœ¬åœ°æ–‡ä»¶
5. **Mock Generator** (é‡æ„): æ”¯æŒå¤š LLM Providerï¼ˆAnthropic API / Claude Code CLIï¼‰
6. **CLI**: å‘½ä»¤è¡Œäº¤äº’ç•Œé¢

## å¼€å‘

### TDD æ–¹å¼å¼€å‘

æœ¬é¡¹ç›®ä½¿ç”¨ TDD æ–¹å¼å¼€å‘ï¼Œæ­¥éª¤ï¼š

1. å…ˆå†™æµ‹è¯•å®šä¹‰é¢„æœŸè¡Œä¸º
2. è¿è¡Œæµ‹è¯•ï¼ˆåº”ï¿½ï¿½å¤±è´¥ï¼‰
3. å®ç°åŠŸèƒ½ä»£ç 
4. è¿è¡Œæµ‹è¯•ï¼ˆåº”è¯¥é€šè¿‡ï¼‰
5. é‡æ„ä¼˜åŒ–

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œå•æ¬¡æµ‹è¯•
npm run test:run

# ç±»å‹æ£€æŸ¥
npx tsc --noEmit
```

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript
- **LLM**: Claude API (Anthropic)
- **æµ‹è¯•**: Vitest
- **CLI**: Commander.js
- **äº¤äº’**: Inquirer.js
- **æ ·å¼**: Chalk

## License

MIT
