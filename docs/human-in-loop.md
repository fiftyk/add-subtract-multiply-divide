# 在计划（plan）设计中引入等待用户输入的机制 

目前我们输入需求时，llm 理解需求后如果没有可用工具会自己生成代码或者提示用户补充工具来完成需求。

但还有另外一类需求，比如“我想要查找任意公司持有的专利信息”，要为设计满足这种需求生成的规划，可能会在plan执行过程中向外部寻求输入，比如“请提供公司名称”，然后再继续执行后续步骤。寻求外部输入的步骤，可能存在于plan执行的任意位置。

为支持这种需求，我们需要在plan的设计中引入“等待用户输入”的机制。具体可以考虑以下几点：

1. **输入占位符**：在plan的步骤中，可以设计一种特殊的占位符，表示需要等待用户输入。例如，在步骤描述中使用“{等待用户输入: 公司名称}”来明确指出需要用户提供信息。
2. **异步执行**：plan的执行需要支持异步操作。当执行到需要用户输入的步骤时，系统应暂停执行，并将控制权交还给用户，等待用户提供所需信息后再继续执行后续步骤。

"等待用户输入"机制在不同形态的程序中形态也不一致，在 cli 程序中，可能是等待用户在终端输入数据，而在 web 程序中，可能是通过弹出对话框或表单让用户填写信息。统一接口设计下的具体实现可以根据不同的运行环境进行适配。